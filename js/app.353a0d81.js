(function(t){function e(e){for(var o,a,i=e[0],l=e[1],c=e[2],d=0,p=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&p.push(r[a][0]),r[a]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);u&&u(e);while(p.length)p.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],o=!0,i=1;i<n.length;i++){var l=n[i];0!==r[l]&&(o=!1)}o&&(s.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},r={app:0},s=[];function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/medium-like-app/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"2ea9":function(t,e,n){"use strict";var o=n("72bd"),r=n.n(o);r.a},"381d":function(t,e,n){},"4f3b":function(t,e,n){"use strict";var o=n("381d"),r=n.n(o);r.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Navbar"),n("transition",{attrs:{appear:"",name:"fade",duration:200,mode:"in-out"}},[n("router-view")],1)],1)},s=[],a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-navbar",[n("template",{slot:"brand"},[n("b-navbar-item",{attrs:{tag:"router-link",to:{path:"/"}}},[n("svg",{staticClass:"aj",attrs:{height:"22",width:"112",viewBox:"0 0 111.5 22"}},[n("path",{attrs:{d:"M56.3 19.5c0 .4 0 .5.3.7l1.5 1.4v.1h-6.5V19c-.7 1.8-2.4 3-4.3 3-3.3 0-5.8-2.6-5.8-7.5 0-4.5 2.6-7.6 6.3-7.6 1.6-.1 3.1.8 3.8 2.4V3.2c0-.3-.1-.6-.3-.7l-1.4-1.4V1l6.5-.8v19.3zm-4.8-.8V9.5c-.5-.6-1.2-.9-1.9-.9-1.6 0-3.1 1.4-3.1 5.7 0 4 1.3 5.4 3 5.4.8.1 1.6-.3 2-1zm9.1 3.1V9.4c0-.3-.1-.6-.3-.7l-1.4-1.5v-.1h6.5v12.5c0 .4 0 .5.3.7l1.4 1.4v.1h-6.5zm-.2-19.2C60.4 1.2 61.5 0 63 0c1.4 0 2.6 1.2 2.6 2.6S64.4 5.3 63 5.3a2.6 2.6 0 0 1-2.6-2.7zm22.5 16.9c0 .4 0 .5.3.7l1.5 1.4v.1h-6.5v-3.2c-.6 2-2.4 3.4-4.5 3.4-2.9 0-4.4-2.1-4.4-6.2 0-1.9 0-4.1.1-6.5 0-.3-.1-.5-.3-.7L67.7 7v.1H74v8c0 2.6.4 4.4 2 4.4.9-.1 1.7-.6 2.1-1.3V9.5c0-.3-.1-.6-.3-.7l-1.4-1.5v-.2h6.5v12.4zm22 2.3c0-.5.1-6.5.1-7.9 0-2.6-.4-4.5-2.2-4.5-.9 0-1.8.5-2.3 1.3.2.8.3 1.7.3 2.5 0 1.8-.1 4.2-.1 6.5 0 .3.1.5.3.7l1.5 1.4v.1H96c0-.4.1-6.5.1-7.9 0-2.7-.4-4.5-2.2-4.5-.9 0-1.7.5-2.2 1.3v9c0 .4 0 .5.3.7l1.4 1.4v.1h-6.5V9.5c0-.3-.1-.6-.3-.7l-1.4-1.5v-.2h6.5v3.1a4.6 4.6 0 0 1 4.6-3.4c2.2 0 3.6 1.2 4.2 3.5.7-2.1 2.7-3.6 4.9-3.5 2.9 0 4.5 2.2 4.5 6.2 0 1.9-.1 4.2-.1 6.5-.1.3.1.6.3.7l1.4 1.4v.1h-6.6zm-81.4-2l1.9 1.9v.1h-9.8v-.1l2-1.9c.2-.2.3-.4.3-.7V7.3c0-.5 0-1.2.1-1.8L11.4 22h-.1L4.5 6.8c-.1-.4-.2-.4-.3-.6v10c-.1.7 0 1.3.3 1.9l2.7 3.6v.1H0v-.1L2.7 18c.3-.6.4-1.3.3-1.9v-11c0-.5-.1-1.1-.5-1.5L.7 1.1V1h7l5.8 12.9L18.6 1h6.8v.1l-1.9 2.2c-.2.2-.3.5-.3.7v15.2c0 .2.1.5.3.6zm7.6-5.9c0 3.8 1.9 5.3 4.2 5.3 1.9.1 3.6-1 4.4-2.7h.1c-.8 3.7-3.1 5.5-6.5 5.5-3.7 0-7.2-2.2-7.2-7.4 0-5.5 3.5-7.6 7.3-7.6 3.1 0 6.4 1.5 6.4 6.2v.8h-8.7zm0-.8h4.3v-.8c0-3.9-.8-4.9-2-4.9-1.4.1-2.3 1.6-2.3 5.7z"}})])])],1),n("template",{slot:"end"},[n("b-navbar-item",{attrs:{tag:"div"}},[n("div",{staticClass:"buttons"},["writer"===t.userRole&&"/"===this.$route.path?n("b-button",{staticClass:"button is-primary",attrs:{tag:"router-link",to:{path:"/post-editor"}}},[n("strong",[t._v("Create post")])]):t._e(),t.userRole?t._e():n("b-button",{staticClass:"button",attrs:{disabled:"",tag:"router-link",to:{path:"/sign-up"}}},[n("strong",[t._v("Sign up")])]),t.userRole?t._e():n("b-button",{staticClass:"button is-success",attrs:{tag:"router-link",to:{path:"/login"}}},[t._v("Log in")]),t.userRole?n("b-button",{staticClass:"button is-danger",attrs:{tag:"button",type:"button"},on:{click:function(e){return e.preventDefault(),t.logout(e)}}},[t._v("Log out")]):t._e()],1)])],1)],2)},i=[],l=n("d4ec"),c=n("bee2"),u=(n("7db0"),n("bc3a")),d=n.n(u),p=function(){function t(){Object(l["a"])(this,t)}return Object(c["a"])(t,[{key:"getPosts",value:function(){return d.a.get("/medium-like-app/db.json").then((function(t){return t.data.posts})).catch((function(t){throw posts=[],t}))}},{key:"getUser",value:function(t){return d.a.get("/medium-like-app/db.json").then((function(e){return e.data.users.length>0?e.data.users.find((function(e){return e.email===t})):alert("User not found")})).catch((function(t){throw t}))}}]),t}(),f=new p,h=(n("a4d3"),n("e01a"),n("4de4"),n("4160"),n("a434"),n("159b"),n("2f62"));o["a"].use(h["a"]);var m=new h["a"].Store({state:{user:{role:""},posts:[]},mutations:{writeRole:function(t,e){t.user.role=e},setPosts:function(t,e){t.posts=e,t.posts.sort((function(t,e){return t.createdAt<e.createdAt?1:-1}))},incrementClaps:function(t,e){t.posts.forEach((function(t){t.id===e&&(t.claps+=1)}))},publishPost:function(t,e){isNaN(e.id)?t.posts.splice(0,0,{id:10*Math.random(),title:e.title,description:e.description,claps:0,createdAt:(new Date).toUTCString()}):(console.log(e.id),t.posts.forEach((function(t){t.id===e.id&&(t.title=e.title,t.description=e.description,t.claps=0)})))},deletePost:function(t,e){confirm("Are you shure?")&&(t.posts=t.posts.filter((function(t){return t.id!==e})))}},actions:{getPosts:function(t){f.getPosts().then((function(e){return t.commit("setPosts",e)}))},setRole:function(t,e){t.commit("writeRole",e)}},modules:{},getters:{getPostsState:function(t){return t.posts},getRights:function(t){return t.user.role},getClaps:function(t){return function(e){return t.posts.find((function(t){return t.id===e}))}}}}),g=n("8c4f"),b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("PostsList")},v=[],w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"component-fade",mode:"out-in"}},[n("section",[n("div",{staticClass:"columns is-mobile is-centered"},[n("div",{staticClass:"column is-half"},[n("b-table",{attrs:{data:t.data,loading:t.loading,paginated:"","backend-pagination":"",total:t.total,"per-page":t.perPage,"aria-next-label":"Next page","aria-previous-label":"Previous page","aria-page-label":"Page","aria-current-label":"Current page","backend-sorting":"","default-sort-direction":t.defaultSortOrder,"default-sort":[t.sortField,t.sortOrder]},scopedSlots:t._u([{key:"default",fn:function(t){return[n("b-table-column",{attrs:{field:"cards"}},[n("Card",{attrs:{data:t.row}})],1)]}}])})],1)])])])},C=[],_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card"},[n("div",{staticClass:"card-content"},[n("div",{staticClass:"content"},[n("div",{staticClass:"card-header"},[n("p",{staticClass:"card-header-title"},[t._v(t._s(t.data.title))])]),n("div",{},[t._v(t._s(t.data.description))]),n("div",{},[n("time",{attrs:{datetime:"this.data.createdAt"}},[t._v("Created at: "+t._s(new Date(t.data.createdAt).toUTCString()))])])])]),n("footer",{staticClass:"card-footer"},[t.clapsCounter?n("span",{staticClass:"card-footer-item"},[t._v(t._s(t.clapsCounter))]):n("span",{staticClass:"card-footer-item"}),"reader"===t.rightsCheck?n("b-button",{staticClass:"card-footer-item is-success",attrs:{tag:"button"},on:{click:function(e){return e.preventDefault(),t.incrementClaps(e)}}},[n("i",{staticClass:"fas fa-sign-language"})]):t._e(),"writer"===t.rightsCheck?n("b-button",{staticClass:"card-footer-item",attrs:{tag:"router-link",to:{path:"/post-editor?key="+this.data.id},"is-clipped":""}},[t._v("Edit "+t._s(t.id))]):t._e(),"writer"===t.rightsCheck?n("b-button",{staticClass:"card-footer-item",on:{click:function(e){return e.preventDefault(),t.deletePost(e)}}},[t._v("Delete")]):t._e()],1)])},k=[],y=(n("a9e3"),{props:{data:{title:String,required:!0},id:Number},created:function(){},methods:{incrementClaps:function(){this.$store.commit("incrementClaps",this.data.id)},deletePost:function(){this.$store.commit("deletePost",this.data.id)}},computed:{clapsCounter:function(t){return this.$store.getters.getClaps(t.data.id).claps},rightsCheck:function(){return this.$store.getters.getRights}}}),P=y,x=(n("2ea9"),n("2877")),O=Object(x["a"])(P,_,k,!1,null,"34dd1f62",null),j=O.exports,$={data:function(){return{loading:!1,sortField:"vote_count",sortOrder:"desc",defaultSortOrder:"desc",page:1,perPage:10}},methods:{},computed:{data:function(){return this.loading=!1,this.$store.getters.getPostsState},total:function(){return this.$store.getters.getPostsState.length}},mounted:function(){this.loading=!0,this.$store.state.posts.length>0?this.loading=!1:this.$store.dispatch("getPosts")},components:{Card:j}},S=$,R=Object(x["a"])(S,w,C,!1,null,null,null),E=R.exports,L={name:"Home",components:{PostsList:E}},N=L,z=Object(x["a"])(N,b,v,!1,null,null,null),A=z.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"columns is-mobile is-centered"},[n("LoginForm")],1)},D=[],q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"column is-2"},[n("form",{on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[n("b-field",[n("b-input",{attrs:{placeholder:"Email",type:"email",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),n("b-field",[n("b-input",{attrs:{placeholder:"Password",type:"password",minlength:"6",maxlength:"20",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),n("div",{staticClass:"control"},[n("b-button",{staticClass:"is-primary",attrs:{tag:"input","native-type":"submit",value:"Sign in"}})],1)],1)])},F=[],H={name:"LoginForm",data:function(){return{email:"",password:""}},methods:{login:function(){var t=this;rt.auth(this.email,this.password).then((function(){return t.$router.push("/")}))}}},M=H,T=Object(x["a"])(M,q,F,!1,null,null,null),I=T.exports,U={name:"Login",components:{LoginForm:I}},B=U,J=Object(x["a"])(B,V,D,!1,null,null,null),W=J.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{appear:""}},[n("section",{staticClass:"section-padding-medium"},[n("div",{staticClass:"columns is-mobile is-centered"},[n("div",{staticClass:"column is-half"},[n("b-field",{attrs:{label:"Heading","label-position":t.labelPosition}},[n("b-input",{attrs:{placeholder:"Write a heading"},model:{value:t.heading,callback:function(e){t.heading=e},expression:"heading"}})],1),n("b-field",{attrs:{label:"Text","label-position":t.labelPosition}},[n("b-input",{attrs:{maxlength:"4000",type:"textarea",rows:"20"},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),n("hr"),n("b-button",{staticClass:"button is-primary",on:{click:function(e){return e.preventDefault(),t.publishPost(e)}}},[t._v("Publish")])],1)])])])},K=[],Q={data:function(){return{heading:"",text:"",labelPosition:"on-border"}},methods:{publishPost:function(){var t=this.heading,e=this.text,n=+this.$route.query.key;this.$store.commit("publishPost",{title:t,description:e,id:n}),this.$router.push("/")}},mounted:function(){var t=this;if(this.$route.query.key){var e=this.$store.getters.getPostsState,n=+this.$route.query.key;e.forEach((function(e){e.id===n&&(t.heading=e.title,t.text=e.description)}))}}},X=Q,Y=(n("4f3b"),Object(x["a"])(X,G,K,!1,null,"6e119ada",null)),Z=Y.exports;o["a"].use(g["a"]);var tt=[{path:"/",name:"Home",component:A},{path:"/login",name:"Login",component:W},{path:"/post-editor",name:"Post Editor",component:Z}],et=new g["a"]({mode:"history",base:"/medium-like-app/",routes:tt}),nt=et,ot=function(){function t(){Object(l["a"])(this,t)}return Object(c["a"])(t,[{key:"checkRights",value:function(){switch(window.localStorage.getItem("role")||window.localStorage.setItem("role","user"),window.localStorage.getItem("role")){case"writer":return m.dispatch("setRole","writer"),"writer";case"reader":return m.dispatch("setRole","reader"),"reader";case"user":return m.dispatch("setRole",!1),!1;default:return!1}}},{key:"auth",value:function(t,e){return f.getUser(t).then((function(t){return e===t.password?(m.dispatch("setRole",t.role),void window.localStorage.setItem("role",t.role)):"Wrong email or password"}))}},{key:"logout",value:function(){m.commit("writeRole",""),window.localStorage.setItem("role","user"),nt.push("/?sign-out")}}]),t}(),rt=new ot,st={name:"Navbar",computed:{userRole:function(){return this.$store.getters.getRights}},methods:{logout:function(){rt.logout()}}},at=st,it=Object(x["a"])(at,a,i,!1,null,null,null),lt=it.exports,ct={created:function(){rt.checkRights()},computed:{},components:{Navbar:lt}},ut=ct,dt=Object(x["a"])(ut,r,s,!1,null,null,null),pt=dt.exports,ft=n("9483");Object(ft["a"])("".concat("/medium-like-app/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});var ht=n("289d"),mt=(n("5abe"),n("a7fe")),gt=n.n(mt);o["a"].config.productionTip=!1,o["a"].use(ht["a"]),o["a"].use(gt.a,d.a),new o["a"]({router:nt,store:m,render:function(t){return t(pt)}}).$mount("#app")},"72bd":function(t,e,n){}});
//# sourceMappingURL=app.353a0d81.js.map